(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{30:function(e,t,a){e.exports=a.p+"static/media/error_image.2d35a47a.jpg"},31:function(e,t,a){e.exports=a(50)},40:function(e,t,a){},41:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(19),i=a.n(r),l=a(6),o=a(3),s=(a(40),Object(o.b)(function(e){return{total_price:e.total_price,count_cart:e.count_cart}})(function(e){var t=e.total_price,a=e.count_cart;return c.a.createElement("div",{className:"basket-header",id:"basket-header"},c.a.createElement("i",{className:"fa fa-shopping-basket basket-i"}),c.a.createElement("span",{className:"basket-count"},a," items"),c.a.createElement("span",{className:"basket-cost"},"($",t,")"))})),u=(a(41),function(){return c.a.createElement("div",{className:"header"},c.a.createElement("div",{className:"row d-flex align-items-center justify-content-between"},c.a.createElement("div",{className:"col-sm-8 col-7 d-flex align-items-center"},c.a.createElement(l.b,{to:"/re-store/",className:"title_link"},c.a.createElement("h3",{className:"store-title"},"ReStore")),c.a.createElement("ul",{className:"menu-store d-flex "},c.a.createElement("li",null,c.a.createElement(l.b,{to:"/re-store/"},"Shop")),c.a.createElement("li",null,c.a.createElement(l.b,{to:"/re-store/cart"},"Cart")))),c.a.createElement("div",{className:"col-md-3 col-sm-4 col-5"},c.a.createElement(l.b,{to:"/re-store/cart",className:"basket_link d-flex justify-content-end"},c.a.createElement(s,null)))))}),m=a(8),d=a(11),p=a(13),E=a(12),f=a(14),v=(a(43),function(e){var t=e.price,a=e.name,n=e.urlImage,r=e.id;return c.a.createElement("div",{className:"col-md-4 col-sm-6 col-12 d-flex justify-content-center"},c.a.createElement("div",{className:"card"},c.a.createElement(l.b,{to:"/re-store/shop/".concat(r)},c.a.createElement("img",{src:n,className:"card-img-top card-image",alt:"..."})),c.a.createElement("div",{className:"card-body"},c.a.createElement("h5",{className:"card-title"},a),c.a.createElement("p",{className:"card-text"},"$",t),c.a.createElement("button",{className:"btn btn-primary btn-add-cart"},c.a.createElement(l.b,{to:"/re-store/shop/".concat(r)},"Buy now")))))}),b=c.a.createContext(),h=b.Consumer,g=b.Provider,N=function(){return function(e){return function(t){return c.a.createElement(h,null,function(a){return c.a.createElement(e,Object.assign({},t,{phoneservice:a}))})}}},j=function(e){return{type:"loading",loading:e}},k=function(e){return{type:"error",error:e}},y=(a(44),function(){return c.a.createElement("div",{className:"spinner"},c.a.createElement("div",{className:"lds-css ng-scope"},c.a.createElement("div",{className:"lds-spinner",style:{width:"100%",height:"100%"}},c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null))))}),O=a(30),_=a.n(O),C=(a(45),function(){return c.a.createElement("div",{className:"error-block"},c.a.createElement("img",{src:_.a,alt:"\u041e\u0448\u0438\u0431\u043a\u0430"}),c.a.createElement("p",{className:"error-block-text"},"We apologize for the inconvenience."))}),w=(a(46),function(e){var t=e.phones.map(function(e){return c.a.createElement(v,Object.assign({},e,{key:e.id}))});return c.a.createElement("div",{className:"shop-content"},c.a.createElement("div",{className:"row"},t))}),x=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(p.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).render=function(){var e=a.props,t=e.phones,n=e.loading;return e.error?c.a.createElement(C,null):n?c.a.createElement(y,null):c.a.createElement(w,{phones:t})},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentWillMount",value:function(){this.props.fetchPhones()}}]),t}(n.Component),I=N()(Object(o.b)(function(e){return{phones:e.phones,loading:e.loading,error:e.error}},function(e,t){var a=t.phoneservice;return{fetchPhones:function(){e(j(!0)),a.getList().then(function(t){e({type:"phone_loaded",payload:t})}).catch(function(t){e(k(t))})}}})(x)),S=function(e){var t=e.name,a=e.count,n=e.price,r=e.number,i=e.clickMinus,l=e.clickPlus,o=e.clickDelete;return c.a.createElement("div",{className:"cart-product"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-1"},c.a.createElement("span",{className:"cart-number"},r)),c.a.createElement("div",{className:"col-3"},c.a.createElement("span",{className:"cart-name"},t)),c.a.createElement("div",{className:"col-2"},c.a.createElement("span",{className:"cart-count"},a)),c.a.createElement("div",{className:"col-2"},c.a.createElement("span",{className:"cart-price"},n)),c.a.createElement("div",{className:"col-4 d-flex align-items-center justify-content-end"},c.a.createElement("div",{className:"cart-action"},c.a.createElement("button",{onClick:i,type:"button",className:"btn-action"},c.a.createElement("i",{className:"fa fa-minus"})),c.a.createElement("button",{onClick:l,type:"button",className:"btn-action"},c.a.createElement("i",{className:"fa fa-plus"})),c.a.createElement("button",{onClick:o,type:"button",className:"btn-action btn-remove-product"},c.a.createElement("i",{className:"fa fa-times","aria-hidden":"true"}))))))},P=Object(o.b)(function(e){return{total_price:e.total_price}})(function(e){var t=e.total_price;return c.a.createElement("div",{className:"checkout"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-12 d-flex justify-content-end"},c.a.createElement("div",{className:"total-block"},c.a.createElement("div",null,c.a.createElement("span",{className:"total-title"},"Total : "),c.a.createElement("span",{className:"total-price"}," $",t)),c.a.createElement("button",{type:"button",className:"btn btn-primary btn-checkout"},c.a.createElement("i",{className:"fa fa-shopping-cart cart-icon"}),c.a.createElement("span",null,"Checkout"))))))}),A=(a(47),{deleteCart:function(e){return{type:"delete_cart",id:e}},plusCart:function(e){return{type:"plus_cart",id:e}},minusCart:function(e){return{type:"minus_cart",id:e}}}),B=Object(o.b)(function(e){return{cart:e.cart}},A)(function(e){var t=e.cart,a=e.plusCart,n=e.minusCart,r=e.deleteCart,i=t.map(function(e,t){var i=e.id;return c.a.createElement(S,Object.assign({key:e.name,number:t+1},e,{clickPlus:function(){return a(i)},clickMinus:function(){return n(i)},clickDelete:function(){return r(i)}}))});return c.a.createElement("div",{className:"cart"},c.a.createElement("h4",{className:"cart-title"},"Your Order"),c.a.createElement("div",{className:"cart-table"},c.a.createElement("div",{className:"cart-table-head"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-1"},c.a.createElement("span",{className:"cart-number"},"#")),c.a.createElement("div",{className:"col-3"},c.a.createElement("span",{className:"cart-name"},"Item")),c.a.createElement("div",{className:"col-2"},c.a.createElement("span",{className:"cart-count"},"Count")),c.a.createElement("div",{className:"col-2"},c.a.createElement("span",{className:"cart-price"},"Price")),c.a.createElement("div",{className:"col-4 d-flex justify-content-end"},c.a.createElement("span",{className:"cart-action"},"Action")))),c.a.createElement("div",{className:"cart-table-body"},i)),c.a.createElement(P,null))}),L=a(15),M=(a(48),function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(a=Object(p.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(c)))).state={count:1},a.plusClick=function(){a.setState(function(e){var t=e.count,n=isFinite(t)?++t:1;return a.update(n),{count:n}})},a.minusClick=function(){a.setState(function(e){var t=e.count,n=1;return isFinite(t)&&(n=t>1?--t:1),a.update(n),{count:n}})},a.counterChange=function(e){a.setState({count:e.target.value}),a.update(e.target.value)},a.update=function(e){a.props.changeCount(e)},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.state.count;return c.a.createElement("div",{className:"product-counter"},c.a.createElement("button",{onClick:this.minusClick,className:"btn-counter btn-minus"},c.a.createElement("i",{className:"fa fa-minus"})),c.a.createElement("input",{onChange:this.counterChange,className:"input-counter",value:e}),c.a.createElement("button",{onClick:this.plusClick,className:"btn-counter btn-plus"},c.a.createElement("i",{className:"fa fa-plus"})))}}]),t}(n.Component)),F=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(a=Object(p.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(c)))).state={active:"",elems:a.props.data},a.clickAttr=function(e){a.setState({active:e}),a.props.clickAttr(e)},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentWillMount",value:function(){var e=this.props.data;this.setState({elems:e})}},{key:"componentDidUpdate",value:function(e){e.data!==this.props.data&&this.setState({elems:this.props.data})}},{key:"render",value:function(){var e=this,t=this.state,a=t.elems,n=t.active,r=a.map(function(t){var a="btn btn-secondary btn-product-attr";return n===t&&(a+=" btn-active"),c.a.createElement("button",{onClick:function(){e.clickAttr(t)},key:t,type:"button",className:a},t)});return c.a.createElement("div",{className:"btn-group btn-product-group",role:"group","aria-label":"Attributes"},r)}}]),t}(n.Component),Q=(a(49),function(e){var t=e.img,a=e.descr;return c.a.createElement("div",{className:"single-page"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-6"},c.a.createElement("div",{className:"product_ceil"},t)),c.a.createElement("div",{className:"col-md-6"},a)))}),W=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(a=Object(p.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(c)))).state={error_message:"",count:1,attr:"",product:{}},a.addClick=function(){var e=a.state,t=e.count,n=e.attr,c=e.product,r="";if(t>=1&&isFinite(t)&&""!==n){a.setState({error_message:""}),a.props.history.push("/re-store/cart/");var i=Object.assign(c,{count:t});a.props.addProduct(i)}else t<1||!isFinite(t)?r="\u041d\u0435\u0432\u0435\u0440\u043d\u043e\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0442\u043e\u0432\u0430\u0440\u0430":""===n&&(r="\u0412\u044b\u0431\u0435\u0440\u0435\u0442\u0435 \u0430\u0442\u0440\u0438\u0431\u0443\u0442"),a.setState({error_message:r})},a.clickAttr=function(e){a.setState({attr:e})},a.changeCount=function(e){a.setState({count:parseInt(e)})},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentWillMount",value:function(){var e=this;this.props.addLoading(!0);var t=this.props,a=t.id,n=t.phoneservice,c=t.addError;n.getPhone(a).then(function(t){e.setState({product:t}),e.props.addLoading(!1)}).catch(function(e){c(e)})}},{key:"render",value:function(){var e=this.state.product,t=e.name,a=e.price,n=e.urlImage,r=e.description,i=e.attr,l=void 0===i?[]:i,o=this.state.error_message,s=this.props,u=s.loading;if(s.error)return c.a.createElement(C,null);var m=c.a.createElement("div",{className:"product_description"},c.a.createElement("h2",{className:"product_name"},t),c.a.createElement("span",{className:"product_price"},"$",a),c.a.createElement("p",{className:"product_about"},r),c.a.createElement(F,{data:l,clickAttr:this.clickAttr}),c.a.createElement(M,{changeCount:this.changeCount}),c.a.createElement("div",{className:"product_add_cart"},c.a.createElement("button",{onClick:this.addClick,type:"button",className:"btn btn-primary btn-single-add"},c.a.createElement("i",{className:"fa fa-shopping-cart product-cart-icon","aria-hidden":"true"})," ",c.a.createElement("span",null,"Add to Cart"))),c.a.createElement("p",{className:"error-message"},o)),d=u?c.a.createElement(y,null):c.a.createElement("img",{src:n,alt:"\u0422\u043e\u0432\u0430\u0440\u044b ReStore"}),p=u?c.a.createElement(y,null):m;return c.a.createElement(Q,{img:d,descr:p})}}]),t}(n.Component),$={addProduct:function(e){return{type:"add_product",product:e}},addLoading:j,addError:k},D=N()(Object(o.b)(function(e){return{single:e.single,loading:e.loading,error:e.error}},$)(W)),T=N()(function(e){var t=e.phoneservice;return c.a.createElement("div",null,c.a.createElement(u,null),c.a.createElement(L.a,{exact:!0,path:"/re-store/",render:function(e){return e.history,c.a.createElement("div",null,c.a.createElement(I,{data:t.getList()}))}}),c.a.createElement(L.a,{path:"/re-store/cart/",component:B}),c.a.createElement(L.a,{exact:!0,path:"/re-store/shop/:id",render:function(e){var t=e.match,a=e.history,n=t.params.id;return c.a.createElement(D,{id:n,history:a})}}))}),G=a(21),H=a(16),J=a(10),R={phones:[],loading:!0,count_cart:0,total_price:0,cart:[],error:null},z=function(e,t){var a=t.cart.findIndex(function(t){return e===t.id});return{ind:a,cartItem:t.cart[a]}},U=function(e,t,a){var n=z(e,t),c=n.ind,r=n.cartItem,i=r.count,l=r.price,o={count:"plus"===a?++i:--i},s=Object.assign(r,o),u="plus"===a?t.total_price+l:t.total_price-l;return Object(J.a)({},t,{total_price:u,cart:[].concat(Object(H.a)(t.cart.slice(0,c)),[s],Object(H.a)(t.cart.slice(c+1)))})},X=Object(G.b)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"loading":return Object(J.a)({},e,{error:null,loading:t.loading});case"phone_loaded":return Object(J.a)({},e,{error:null,phones:t.payload,loading:!1});case"error":return Object(J.a)({},e,{loading:!1,error:t.error});case"add_product":var a,n=t.product,c=n.price,r=n.count,i=n.id,l=n.name,o=e.count_cart+r,s=e.total_price+c*r,u=z(i,e),m=u.ind,d=u.cartItem;if(d){var p=r+d.count,E=d.price;a=Object(J.a)({},d,{count:p,price:E})}else a={name:l,count:r,price:c,id:i};return m<0?Object(J.a)({},e,{count_cart:o,total_price:s,cart:[].concat(Object(H.a)(e.cart),[a])}):Object(J.a)({},e,{count_cart:o,total_price:s,cart:[].concat(Object(H.a)(e.cart.slice(0,m)),[a],Object(H.a)(e.cart.slice(m+1)))});case"minus_cart":var f=t.id;return U(f,e,"minus");case"plus_cart":var v=t.id;return U(v,e,"plus");case"delete_cart":return function(e,t){var a=z(e,t),n=a.ind,c=a.cartItem,r=t.total_price-c.count*c.price,i=t.count_cart-c.count;return Object(J.a)({},t,{total_price:r,count_cart:i,cart:[].concat(Object(H.a)(t.cart.slice(0,n)),Object(H.a)(t.cart.slice(n+1)))})}(t.id,e);default:return e}}),Y=new function e(){var t=this;Object(m.a)(this,e),this.phones=[{name:"Xiaomi mi a1",price:300,urlImage:"/image/3.jpg",id:1,attr:["Black","Blue","Gold"],description:"Lorem ipsum, dolor sit amet consectetur adipisicing elit. Quidem eos modi adipisci cupiditate culpa distinctio porro ad sit at dolorem."},{name:"Samsung s10 note",price:1e3,urlImage:"/image/2.jpg",id:2,attr:["Black","Blue","Gold","Silver"],description:"Lorem ipsum, dolor sit amet consectetur adipisicing elit. Quidem eos modi adipisci cupiditate culpa distinctio porro ad sit at dolorem."},{name:"Honor p20",price:400,urlImage:"/image/3.jpg",id:3,attr:["Black","Blue"],description:"Lorem ipsum, dolor sit amet consectetur adipisicing elit. Quidem eos modi adipisci cupiditate culpa distinctio porro ad sit at dolorem."},{name:"Honor p30",price:500,urlImage:"/image/3.jpg",id:4,attr:["Black","Blue"],description:"Lorem ipsum, dolor sit amet consectetur adipisicing elit. Quidem eos modi adipisci cupiditate culpa distinctio porro ad sit at dolorem."}],this.getList=function(){var e=t.phones.map(t.transformPhone);return new Promise(function(t,a){setTimeout(function(){t(e)},300)})},this.getPhone=function(e){var a={};return t.phones.forEach(function(t){t.id==e&&(a=t)}),new Promise(function(e,t){setTimeout(function(){e(a)},300)})},this.transformPhone=function(e){return{name:e.name,price:e.price,urlImage:e.urlImage,id:e.id}}},q=document.getElementById("main-content");i.a.render(c.a.createElement(o.a,{store:X},c.a.createElement(g,{value:Y},c.a.createElement(l.a,null,c.a.createElement(T,null)))),q)}},[[31,1,2]]]);
//# sourceMappingURL=main.3adc4384.chunk.js.map